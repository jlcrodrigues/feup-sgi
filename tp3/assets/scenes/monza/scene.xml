<?xml version="1.0" encoding="UTF-16" standalone="yes"?>
<yaf> 
	
    <globals background="0 0 0 1" ambient="0.2 0.2 0.2 1" /> 


    <cameras initial="Free Camera" > 
        <perspective id="Free Camera" 
            angle="60" 
            near="0.1" 
            far="1000" 
            location="-30 60 20" 
            target="20 0 20" /> 
    </cameras> 

    <skybox size="2000 2000 2000" center="0 50 0" emissive="0.7 0.7 0.7 1" intensity="5" up="assets/scenes/monza/textures/sky.jpeg" down="assets/scenes/monza/textures/snow_floor.jpeg" left="assets/scenes/monza/textures/snow_landscape.jpeg" right="assets/scenes/monza/textures/snow_landscape.jpeg" front="assets/scenes/monza/textures/snow_landscape.jpeg" back="assets/scenes/monza/textures/snow_landscape.jpeg"/>

    <!-- bloco de texturas. Este bloco tem de existir mas pode estar vazio, se nao forem usadas texturas --> 
    <textures>        
        <texture id="treeTex" filepath="assets/scenes/monza/textures/tree.jpeg" />
        <texture id="woodTex" filepath="assets/scenes/monza/textures/wood.png" />
        <texture id="blackWoodTex" filepath="assets/scenes/monza/textures/black_wood.jpeg" />
        <texture id="roadTex" filepath="assets/scenes/monza/textures/road.jpg" />
        <texture id="roadBumpTex" filepath="assets/scenes/monza/textures/roadBump.png" />
        <texture id="wallTex" filepath="assets/scenes/monza/textures/wall.avif" />
        <texture id="wallBumpTex" filepath="assets/scenes/monza/textures/wallBump.png" />
        <texture id="windowTex" filepath="assets/scenes/monza/textures/window.jpg" />
    </textures> 

    <materials> 
        <material id="treeApp" 
            emissive="0.0 0.0 0.0 1" 
            color="0.8 0.8 0.8 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="treeTex" 
            texlength_s="1" 
            texlength_t="1"
            wireframe = "false" />

        <material id="woodApp" 
            color="0.8 0.8 0.8 1.0" 
            emissive="0.0 0.0 0.0 0.0" 
			specular="0 0 0 0" 
            shininess="10" 
            textureref="woodTex" 
            texlength_s="1" 
            texlength_t="1" />
        
        <material id="blackWoodApp" 
            color="0.8 0.8 0.8 1.0" 
            emissive="0.0 0.0 0.0 0.0" 
			specular="0 0 0 0" 
            shininess="10" 
            textureref="blackWoodTex" 
            texlength_s="1" 
            texlength_t="1" />
			
        <material id="roadApp" 
            color="0.5 0.5 0.5 1.0" 
            emissive="0.0 0.0 0.0 1" 
			specular="0 0 0 0" 
            shininess="20"
            textureref="roadTex" 
            bumpref="roadBumpTex" 
            texlength_s="4"
            texlength_t="4"
        />
			
        <material id="groundApp" 
            color="0.2 0.7 0.2 1.0" 
            emissive="0.0 0.0 0.0 1" 
			specular="0 0 0 0" 
            shininess="20"
        />
			
        <material id="pitGroundApp" 
            color="0.25 0.25 0.25 1.0" 
            emissive="0.0 0.0 0.0 1" 
			specular="0 0 0 0" 
            shininess="20"
        />
			
        <material id="wallApp" 
            color="0.75 0.75 0.75 1.0" 
            emissive="0.0 0.0 0.0 1" 
			specular="0 0 0 0" 
            shininess="20"
            twosided="true"
            textureref="wallTex" 
            bumpref="wallBumpTex" 
            bumpscale="0.01"
            texlength_s="60"
            texlength_t="100"
        />
			
        <material id="windowApp" 
            color="0.75 0.75 0.85 1.0" 
            emissive="0.00 0.00 0.00 1" 
			specular="0.5 0.5 0.5 1" 
            shininess="50"
            twosided="true"
            textureref="windowTex" 
            texlength_s="12"
            texlength_t="12"
        />
    </materials> 

    <graph rootid="scene">
        <node id="scene" castshadows="true" receiveshadows="true">
            <children>
                <noderef id="ground" />
                <noderef id="pit" />
                <noderef id="outsideTrees" />

                <noderef id="line1" />
                <noderef id="line2" />

                <directionallight id="sun"
                    enabled="true"
                    color="1 1 1 1"    
                    intensity="2"
                    position="300 500 -200"
                    castshadow="true"
                />  
            </children>
        </node>

        <node id="line1">
            <transforms>
                <translate value3="-230 0 -10" />
            </transforms> 
            <children>
                <noderef id="tree1" />
            </children>
        </node>

        <node id="line2">
            <transforms>
                <translate value3="-230 0 10" />
            </transforms> 
            <children>
                <noderef id="tree1" />
            </children>
        </node>

        <node id="ground">
            <transforms>
                <translate value3="-750 0 750" />
                <rotate value3="-90 0 0" />
            </transforms> 
            <materialref id="groundApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="1500 1000" />
                </primitive>
            </children>
        </node>

        <!--~~~~~~~~~~~~~~~~~~~~~~~~~ PIT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->

        <node id="pit">
            <transforms>
            </transforms> 
            <children>
                <noderef id="pitGround" />
                <noderef id="pitEntry" />
                <noderef id="pitExit" />
                <noderef id="pitBuildingGroup" />
            </children>
        </node>

        <node id="pitGround">
            <transforms>
                <translate value3="-290 0.02 70" />
                <rotate value3="-90 0 0" />
            </transforms> 
            <materialref id="pitGroundApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="250 50" />
                </primitive>
            </children>
        </node>

        <node id="pitEntry">
            <transforms>
                <translate value3="-320 0.01 10" />
                <rotate value3="-90 0 -20" />
            </transforms> 
            <materialref id="pitGroundApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="90 20" />
                </primitive>
            </children>
        </node>

        <node id="pitExit">
            <transforms>
                <translate value3="-50 0.01 40" />
                <rotate value3="-90 0 20" />
            </transforms> 
            <materialref id="pitGroundApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="90 20" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingGroup">
            <transforms>
                <translate value3="-220 0 60" />
            </transforms> 
            <children>
                <noderef id="pitBuilding1" />
                <noderef id="pitBuilding2" />
                <noderef id="pitBuilding3" />
                <noderef id="pitBuilding4" />
                <noderef id="pitBuilding5" />
                <noderef id="pitBuilding6" />
                <noderef id="pitBuilding7" />
                <noderef id="pitBuilding8" />
            </children>
        </node>

        <node id="pitBuilding1">
            <transforms>
                <translate value3="0 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding2">
            <transforms>
                <translate value3="20 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding3">
            <transforms>
                <translate value3="40 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding4">
            <transforms>
                <translate value3="60 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding5">
            <transforms>
                <translate value3="80 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding6">
            <transforms>
                <translate value3="100 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding7">
            <transforms>
                <translate value3="120 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding8">
            <transforms>
                <translate value3="140 0 0" />
            </transforms> 
            <children>
                <noderef id="pitBuilding" />
            </children>
        </node>

        <node id="pitBuilding">
            <transforms>
            </transforms> 
            <children>
                <noderef id="pitBuildingStructure" />
            </children>
        </node>

        <node id="pitBuildingStructure">
            <transforms>
            </transforms> 
            <children>
                <noderef id="pitBuildingWallLeft" />
                <noderef id="pitBuildingWallRight" />
                <noderef id="pitBuildingWallBack" />
                <noderef id="pitBuildingFrontFrame" />
                <noderef id="pitBuildingRoof" />
                <noderef id="pitBuildingTriangleLeft" />
                <noderef id="pitBuildingTriangleRight" />
                <noderef id="pitBuildingFacade" />
            </children>
        </node>

        <node id="pitBuildingRoof">
            <transforms>
                <rotate value3="-90 0 0" />
                <translate value3="-10 25 10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="20 25" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingFacade">
            <transforms>
                <rotate value3="-18.43 0 0" />
                <translate value3="-10 10 -10" />
            </transforms> 
            <materialref id="windowApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="20 15.81" />
                </primitive>
                <noderef id="pitBuildingFacadeFrame" />
            </children>
        </node>

        <node id="pitBuildingFacadeFrame">
            <transforms>
                <translate value3="0.00 0.00 -0.01" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <noderef id="pitBuildingFacadeFrameLeft" />
                <noderef id="pitBuildingFacadeFrameRight" />
                <noderef id="pitBuildingFacadeFrameTop" />
            </children>
        </node>

        <node id="pitBuildingFacadeFrameTop">
            <transforms>
                <translate value3="0.00 15.00 0.00" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="20 1" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingFacadeFrameLeft">
            <transforms>
                <translate value3="19.00 0.00 0.00" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="1 15.81" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingFacadeFrameRight">
            <transforms>
                <translate value3="0.00 0.00 0.00" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="1 15.81" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingTriangleLeft">
            <transforms>
                <translate value3="10 10 -10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <triangle xyz1="0 0 0" xyz2="0 15 0" xyz3="0 15 -5" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingTriangleRight">
            <transforms>
                <translate value3="-10 10 -10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <triangle xyz1="0 0 0" xyz2="0 15 0" xyz3="0 15 -5" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingWallLeft">
            <transforms>
                <rotate value3="0 90 0" />
                <translate value3="10 0 10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="20 25" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingWallRight">
            <transforms>
                <rotate value3="0 90 0" />
                <translate value3="-10 0 10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="20 25" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingWallBack">
            <transforms>
                <rotate value3="0 0 0" />
                <translate value3="-10 0 10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="20 25" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingFrontFrame">
            <transforms>
                <rotate value3="0 0 0" />
                <translate value3="0 0 -10" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <noderef id="pitBuildingFrontFrameLeft" />
                <noderef id="pitBuildingFrontFrameRight" />
                <noderef id="pitBuildingFrontFrameTop" />
            </children>
        </node>

        <node id="pitBuildingFrontFrameLeft">
            <transforms>
                <rotate value3="0 0 0" />
                <translate value3="7 0 0" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="3 10" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingFrontFrameRight">
            <transforms>
                <rotate value3="0 0 0" />
                <translate value3="-10 0 0" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="3 10" />
                </primitive>
            </children>
        </node>

        <node id="pitBuildingFrontFrameTop">
            <transforms>
                <rotate value3="0 0 0" />
                <translate value3="-7 7 0" />
            </transforms> 
            <materialref id="wallApp" />
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="16 3" />
                </primitive>
            </children>
        </node>

        <node id="outsideTrees">
            <transforms>
            </transforms> 
            <children>
                <noderef id="treePatch1" />
                <noderef id="treePatch2" />
                <noderef id="treePatch3" />
                <noderef id="treePatch4" />
                <noderef id="treePatch5" />
                <noderef id="treePatch6" />
                <noderef id="treePatch7" />
            </children>
        </node>

        <node id="treePatch">
			<transforms>
            </transforms> 
            <children>             
                <noderef id="treePatchTree1" />
                <noderef id="treePatchTree2" />
                <noderef id="treePatchTree3" />
            </children> 
        </node>

        <node id="treePatch1">
            <transforms>
                <translate value3="150 0 0" />
                <scale value3="1.0 1.2 1.0"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch2">
            <transforms>
                <translate value3="155 0 30" />
                <scale value3="1.2 1.4 1.2"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch3">
            <transforms>
                <translate value3="20 0 55" />
                <scale value3="1.3 1.2 1.3"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch4">
            <transforms>
                <translate value3="150 0 50" />
                <scale value3="1.2 1.3 1.2"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch5">
            <transforms>
                <translate value3="-40 0 50" />
                <scale value3="1.2 1.3 1.2"/>
                <rotate value3="0 10 0"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch6">
            <transforms>
                <translate value3="-45 0 -40" />
                <scale value3="1.2 1.3 1.2"/>
                <rotate value3="0 -10 0"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch7">
            <transforms>
                <translate value3="-15 0 -45" />
                <scale value3="1.2 1.3 1.2"/>
                <rotate value3="0 -70 0"/>
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatch8">
            <transforms>
                <translate value3="78 0 -48" />
                <scale value3="1.2 1.3 1.2"/>
                <rotate value3="0 -100 0" />
            </transforms> 
            <children>
                <noderef id="treePatch" />
            </children>
        </node>

        <node id="treePatchTree1">
            <transforms>
                <translate value3="13 0 5" />
                <scale value3="1.2 1.4 1.2"/>
            </transforms> 
            <children>
                <lodref id="treeLod" />
            </children>
        </node>

        <node id="treePatchTree2">
            <transforms>
                <translate value3="0 0 0" />
                <scale value3="1.2 1.0 1.2"/>
            </transforms> 
            <children>
                <lodref id="treeLod" />
            </children>
        </node>

        <node id="treePatchTree3">
            <transforms>
                <translate value3="0 0 10" />
                <scale value3="1.2 1.3 1.2"/>
            </transforms> 
            <children>
                <lodref id="treeLod" />
            </children>
        </node>

        <lod id="treeLod">
            <noderef id="tree1" mindist= "50"/>
            <noderef id="tree2" mindist="100"/>
            <noderef id="tree3" mindist="150"/>
        </lod>

        <node id="tree1">
			<transforms>
            </transforms> 
            <children>             
				<noderef id="trunk" />
				<noderef id="treeSeg1" />
				<noderef id="treeSeg2" />
				<noderef id="treeSeg3" />
				<noderef id="treeSeg4" />
				<noderef id="treeSeg5" />
            </children> 
        </node>

        <node id="tree2">
			<transforms>
            </transforms> 
            <children>             
				<noderef id="trunk" />
				<noderef id="treeSeg1" />
				<noderef id="treeSeg2" />
				<noderef id="treeSeg3" />
            </children> 
        </node>

        <node id="tree3">
            <children>             
				<noderef id="trunk" />
                <noderef id="tree3Special"/>
            </children> 
        </node>

        <node id="tree3Special">
			<transforms>
				<translate value3="0 6 0" />
            </transforms> 
			<materialref id="treeApp" />
            <children>             
                <primitive>
                    <cylinder base="3" top="0" height="8" slices="10" stacks="64" />
                </primitive>
            </children> 
        </node>

        <node id="trunk">
			<transforms>
				<translate value3="0 1.5 0" />
			</transforms> 
			<materialref id="woodApp" />
            <children>             
                <primitive>
                    <cylinder base="0.9" top="0.9" height="3" slices="32" stacks="32" />
                </primitive>
            </children> 
        </node>

        <node id="treeSeg1">
			<transforms>
				<translate value3="0 4 0" />
            </transforms> 
			<materialref id="treeApp" />
            <children>             
                <primitive>
                    <cylinder base="3" top="1.2" height="4" slices="10" stacks="64" />
                </primitive>
            </children> 
        </node>
		
		<node id="treeSeg2">
			<transforms>
				<translate value3="0 6.4 0" />
            </transforms> 
			<materialref id="treeApp" />
            <children>
                <primitive >
                    <cylinder base="2.3" top="0.8" height="3" slices="7" stacks="64" />
                </primitive>
            </children> 
        </node>
		
		<node id="treeSeg3">
			<transforms>
				<translate value3="0 9 0" />
            </transforms> 
			<materialref id="treeApp" />
            <children>             
                <primitive>
                    <cylinder base="1.5" top="0" height="3" slices="10" stacks="64" />
                </primitive>
            </children> 
        </node>
		
		<node id="treeSeg4">
			<transforms>
				<translate value3="0 8 0" />
            </transforms> 
			<materialref id="treeApp" />
            <children>             
                <primitive>
                    <cylinder base="2.3" top="0" height="3" slices="6" stacks="64" />
                </primitive>
            </children> 
        </node>
		
		<node id="treeSeg5">
			<transforms>
				<translate value3="0 9.8 0" />
            </transforms> 
			<materialref id="treeApp" />
            <children>             
                <primitive>
                    <cylinder base="1.7" top="0" height="3" slices="6" stacks="64" />
                </primitive>
            </children> 
        </node>
    </graph>
</yaf> 