<?xml version="1.0" encoding="UTF-16" standalone="yes"?>
<yaf> 
	
    <globals background="0.88 0.96 1.0 1" ambient="0.0 0.0 0.0 1" /> 

    <fog color="0.0 0.0 0.0 1.0" near="0.0" far="100.0" />

    <skybox size="200 200 200" 
        center="0 99.9 0" 
        emissive="0 0 0 1" 
        intensity="0" 
        front="scenes/textures/front.png" 
        back="scenes/textures/back.png" 
        up="scenes/textures/top.png" 
        down="scenes/textures/bottom.png" 
        left="scenes/textures/left.png" 
        right="scenes/textures/right.png" />

    <cameras initial="Full View" > 
        <perspective id="Full View" 
            angle="60" 
            near="0.1" 
            far="1000" 
            location="88 70 88" 
            target="0.0 0.0 0.0" /> 

        <orthogonal id="Beach View"
            near="0" 
            far="1000"
            location="0.0 1.0 -30.0" 
            target="10 0 0" 
            left="-100" 
            right="100" 
            bottom="0" 
            top="100" />
        
        <orthogonal id="Hut View"
            near="0" 
            far="1000"
            location="-5.0 5.0 -5.0" 
            target="-10 4 -10" 
            left="-50" 
            right="50" 
            bottom="0" 
            top="50" />
        
        <perspective id="Cannon View"
            angle="70"
            near="0.1" 
            far="1000"
            location="63.0 19.0 40.0" 
            target="40 20 40" />
    </cameras> 

    <textures>
		<texture id="seaTex" filepath="scenes/textures/sea.mp4" isVideo="true" />
        <texture id="legTex" filepath="scenes/textures/rust.jpg" />
        <texture id="boatStructureTex" filepath="scenes/textures/boatWood.jpg" />
        <texture id="sailTex" filepath="scenes/textures/flag.png" />
        <texture id="fireTex" filepath="scenes/textures/fire.jpg" />
        <texture id="coinsTex" filepath="scenes/textures/coins.jpg" />
        <texture id="chestTex" filepath="scenes/textures/chest.jpg" />
        <texture id="tilesTex" filepath="scenes/textures/tiles.png" />
        <texture id="doorTex" filepath="scenes/textures/door.jpg" />
        <texture id="sandTex" filepath="scenes/textures/sand.jpg" />
        <texture id="sandBump" filepath="scenes/textures/sandBump.png" />
        <texture id="metalTex" filepath="scenes/textures/metal.jpg" />
        <texture id="darkWoodTex" filepath="scenes/textures/darkWood.jpg" />
        <texture id="cannonBallTex" filepath="scenes/textures/cannonBall.jpg" />
        <texture id="paintingTex" filepath="scenes/textures/caravaggio.jpg" 
        mipmap0="scenes/textures/caravaggio_1024.jpg"
        mipmap1="scenes/textures/caravaggio_512.jpg"
        mipmap2="scenes/textures/caravaggio_256.jpg"
        mipmap3="scenes/textures/caravaggio_128.jpg"
        mipmap4="scenes/textures/caravaggio_64.jpg"
        mipmap5="scenes/textures/caravaggio_32.jpg"
        mipmap6="scenes/textures/caravaggio_16.jpg"
        mipmap7="scenes/textures/caravaggio_8.jpg"
        />
    </textures>

    <materials>
		<material id="seaMat" 
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="seaTex" 
            texlength_s="200" 
            texlength_t="200" />

        <material id="walkMat" 
            emissive="0.0 0.0 0.0 1" 
            color="0.87 0.72 0.52 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            twosided="true" />

        <material id="legMat" 
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="boatStructureTex" 
            texlength_s="1" 
            texlength_t="1" 
            twosided="false" />
        
        <material id="boatStructureMat"
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="boatStructureTex" 
            texlength_s="1" 
            texlength_t="1" 
            twosided="true" />

        <material id="sailMat"
            emissive="0.0 0.0 0.0 1"
            color="1.0 1.0 1.0 1"
            specular="0 0 0 0"
            shininess="10"
            textureref="sailTex" 
            texlength_s="1" 
            texlength_t="1" 
            twosided="true" />

        <material id="wickMat"
            emissive="0.886 0.345 0.13 1.0"  
            color="0.886 0.345 0.13 1.0"   
            specular="0.0 0.0 0.0 1" 
            shininess="100"
            textureref="fireTex" 
            texlength_s="1" 
            texlength_t="1" 
            twosided="true" />

        <material id="sailLodMat"
            emissive="0.0 0.0 0.0 1"
            color="0.0 0.0 0.0 1"
            specular="0 0 0 0"
            shininess="10"
            twosided="true" />

        <material id="chestMat" 
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="chestTex"
            twosided="true" />

        <material id="hutMat" 
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="chestTex"
            twosided="true"  />

        <material id="paintingMat" 
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            texlength_s="5" 
            texlength_t="5" 
            textureref="paintingTex"
            twosided="true"  />

        <material id="coinsMat"
            emissive="0.0 0.0 0.0 1"
            color="1.0 1.0 1.0 1"
            specular="0 0 0 0"
            shininess="10"
            textureref="coinsTex" 
            texlength_s="5" 
            texlength_t="5" 
            twosided="true"  />

        <material id="leafsMat"
            emissive="0.0 0.0 0.0 1"
            color="0.54 0.85 0 1"
            specular="0 0 0 0"
            shininess="0"
            twosided="true"  />

        <material id="tilesMat" 
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            textureref="tilesTex"
            twosided="true" />

        <material id="doorMat" 
            emissive="0.0 0.0 0.0 1" 
            color="0.5 0.5 0.5 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            texlength_s="5" 
            texlength_t="10.5" 
            textureref="doorTex"
            twosided="true" />

        <material id="netMat"
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0" 
            wireframe="true"
            twosided="true" />

        <material id="sandMat"
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0 0 0 0" 
            shininess="0"
            texlength_s="25"
            texlength_t="50"
            textureref="sandTex"
            twosided="true"
            bumpref="sandBump"
            bumpscale="1" />
        
        <material id="metalMat"
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0.1 0.1 0.1 1.0" 
            shininess="100"
            twosided="true"
            texlength_s="1"
            texlength_t="1"
            textureref="metalTex" />

        <material id="darkWoodMat"
            emissive="0.0 0.0 0.0 1" 
            color="1.0 1.0 1.0 1.0"  
            specular="0.0 0.0 0.0 1.0" 
            shininess="0"
            twosided="false"
            texlength_s="1"
            texlength_t="1"
            textureref="darkWoodTex" />
        <material id="shieldMat" 
            color="1.0 1.0 1.0 1.0"
            emissive="0.0 0.0 0.0 1.0"
            specular="1.0 1.0 1.0 1.0"
            shininess="100"
            twosided="true" />
        
        <material id="cannonBallMat"
            color="1.0 1.0 1.0 1.0"
            emissive="0.0 0.0 0.0 1.0"
            specular="0.0 0.0 0.0 1.0"
            shininess="0"
            twosided="false"
            texlength_s="1"
            texlength_t="1"
            textureref="cannonBallTex" />
    
    </materials>

    <graph rootid="scene"> 
		
		<node id="scene"> 
            <children> 
				<noderef id="sea" />
                <noderef id="bridge" />
                <noderef id="boats" />
                <noderef id="beach" />
                <lodref id="hutLod" />

                <directionallight id="dirLight"
                    color="1.0 1.0 1.0 1" 
                    intensity="1.0"
                    castshadow="true"
                    position="-22.5 100 -100"
                    shadowleft="-100"
                    shadowright="100"
                    shadowbottom="-100"
                    shadowtop="100"
                    shadowfar="1000"
                    shadowmapsize="4096" />
                <pointlight id="pointLight1"
                    color="1.0 1.0 1.0 1"
                    intensity="2.0"
                    position="-57.5 14.5 -19.5"
                    decay="0.8"
                    shadowfar="1000"
                    castshadow="true" />
                <pointlight id="pointLight2"
                    color="1.0 1.0 1.0 1"
                    intensity="2.0"
                    position="-67.5 14.5 -19.5"
                    decay="0.8"
                    shadowfar="1000"
                    castshadow="true" />
            </children>
        </node>

        <node id="beach" receiveshadows="true">
            <transforms>
                <translate value3="-100.0 0.0 -50.0" />
                <rotate value3="-1.396 0.0 0.0" />
            </transforms>
            
            <children>
                <noderef id="beachPlane" />
                <noderef id="chest" />
                <noderef id="palmTree1" />
                <noderef id="palmTree2" />
            </children>
        </node>

        <node id="hut1" castshadows="true" receiveshadows="true">
            <materialref id="hutMat" />
            <transforms>
                <rotate value3="-1.57 0 0" />
                <translate value3="-80.0 80.0 8" />
            </transforms>
            <children>
                <noderef id="hutLegs" />
                <noderef id="hutRoof" />
                <noderef id="hutBase"/>
            </children>
        </node>

        <node id="hut2" castshadows="true" receiveshadows="true">
            <materialref id="hutMat" />
            <transforms>
                <rotate value3="-1.57 0 0" />
                <translate value3="-80.0 80.0 8" />
            </transforms>
            <children>
                <noderef id="hutLegs" />
                <noderef id="hutRoof" />
                <noderef id="hutBase2"/>
            </children>
        </node>

        <node id="hut3" castshadows="true" receiveshadows="true">
            <materialref id="hutMat" />
            <transforms>
                <rotate value3="-1.57 0 0" />
                <translate value3="-80.0 80.0 8" />
            </transforms>
            <children>
                <noderef id="hutBase2"/>
            </children>
        </node>

        <node id="hutLegs">
         
            <children>
                <noderef id="hutLeg1" />
                <noderef id="hutLeg2" />
                <noderef id="hutLeg3" />
                <noderef id="hutLeg4" />
            </children>
        </node>

         <node id="hutLeg1">
            <transforms>
                <rotate value3="1.57 0 0" />
                <translate value3="1.5 -1 -1.5" />
            </transforms>

            <materialref id="legMat" />

            <children>
                <noderef id="hutLeg" />
            </children>
        </node>

        <node id="hutLeg2">
            <transforms>
                <rotate value3="1.57 0 0" />
                <translate value3="18.5 -1 -1.5" />
            </transforms>

            <materialref id="legMat" />
        
            <children>
                <noderef id="hutLeg" />
            </children>
        </node>

        <node id="hutLeg3">
            <transforms>
                <rotate value3="1.57 0 0" />
                <translate value3="1.5 -1 -13.5" />
            </transforms>

            <materialref id="legMat" />
        
            <children>
                <noderef id="hutLeg" />
            </children>
        </node>

        <node id="hutLeg4">
            <transforms>
                <rotate value3="1.57 0 0" />
                <translate value3="18.5 -1 -13.5" />
            </transforms>

            <materialref id="legMat" />

            <children>
                <noderef id="hutLeg" />
            </children>
        </node>

        <node id="hutLeg">
            <children>
                <primitive>
                    <cylinder base="1" top="1" height="3" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="hutRoof">
            <materialref id="tilesMat" />

            <children>
                <noderef id="triangleRoof"/>
            </children>
        </node>

        <node id="triangleRoof">
            <transforms>
                <translate value3="10.0 7.5 15" />
                <rotate value3="-1.57 0.0 1.57" />
                <scale value3="1.0 2 1.0" />
            </transforms>

            <children>
                <primitive>
                    <cylinder base="7.5" top="7.5" height="10.0" slices="2" stacks="1" thetalength="3.14" thetastart="3.14" />
                </primitive>
            </children>
        </node>

        <node id="hutBase">
            
            <children>
                <noderef id="hutBox" />
                <noderef id="hutDoor" />
                <noderef id="hutPainting" />
            </children>
        </node>

        <node id="hutBase2">
            
            <children>
                <noderef id="hutBox" />
            </children>
        </node>

        

        <node id="hutPainting">
            <transforms>
                <translate value3="1.0 -0.1 8" />
                <rotate value3="1.57 0.0 0" />
            </transforms>

            <materialref id="paintingMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="5 5" />
                </primitive>
            </children>
        </node>

         <node id="hutDoor">
            <transforms>
                <translate value3="7.5 -0.1 10" />
                <rotate value3="-1.57 0.0 0" />
            </transforms>

            <materialref id="doorMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="5 10" />
                </primitive>
            </children>
        </node>

        <node id="hutBox">
            <children>
                <primitive>
                    <box xyz1="0 0 0" xyz2="20 15 15"/>
                </primitive>
            </children>
        </node>

        <node id="chest" castshadows="true" receiveshadows="true">
            <transforms>
                <translate value3="75.0 15.0 0.01" />
                <scale value3="0.75 0.75 0.75" />
            </transforms>
            
            <children>
                <noderef id="chestBase" />
                <noderef id="chestTop" />
                <noderef id="coins" />
            </children>
        </node>

        <node id="palmTree2" castshadows="true" receiveshadows="true">
            <transforms>
                <translate value3="87.5 25.0 5.1" />
                <rotate value3="1.57 0.0 0.0" />
            </transforms>

            <children>
                <noderef id="palmLeafs1" />
                <noderef id="palmLeafs2" />
                <noderef id="palmLeafs3" />
                <noderef id="palmLeafs4" />
                <noderef id="palmTrunk" />
            </children>
        </node>

        <node id="palmTree1" castshadows="true" receiveshadows="true">
            <transforms>
                <translate value3="70.0 25.0 5.1" />
                <rotate value3="1.57 0.0 0.0" />
            </transforms>

            <children>
                <noderef id="palmLeafs1" />
                <noderef id="palmLeafs2" />
                <noderef id="palmLeafs3" />
                <noderef id="palmLeafs4" />
                <noderef id="palmTrunk" />
            </children>
        </node>

        <node id="palmLeafs1">

            <materialref id="leafsMat" />

            <transforms>
                <translate value3="0.0 17.5 1" />
                <rotate value3="-1.57 0.0 0" />
                <scale value3="1.5 1.0 3" />
            </transforms>
             <children>
                <noderef id="palmLeafs" />
            </children>

        </node>

        <node id="palmLeafs2">

            <materialref id="leafsMat" />
            <transforms>
                <translate value3="1.0 17.5 0.0" />
                <rotate value3="-1.57 0.0 1.57" />
                <scale value3="1.5 1.0 3" />
            </transforms>
            <children>
                <noderef id="palmLeafs" />
            </children>
        </node>

        <node id="palmLeafs3">
            <materialref id="leafsMat" />
            <transforms>
                <translate value3="0.0 17.5 -1.0" />
                <rotate value3="-1.57 0.0 3.14" />
                <scale value3="1.5 1.0 3" />
            </transforms>
            <children>
                <noderef id="palmLeafs" />
            </children>
        </node>

        <node id="palmLeafs4">
            <materialref id="leafsMat" />
            <transforms>
                <translate value3="-1.0 17.5 0.0" />
                <rotate value3="-1.57 0.0 4.71" />
                <scale value3="1.5 1.0 3" />
            </transforms>

            <children>
                <noderef id="palmLeafs" />
            </children>

        </node>

        <node id="palmLeafs">

            <children>
                <primitive>
                    <nurbs degree_u="3" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="0" yy="1" zz="0" />
                        <controlpoint xx="0" yy="2" zz="0" />
                        <controlpoint xx="1" yy="0" zz="0.5" />
                        <controlpoint xx="1" yy="1" zz="0.5" />
                        <controlpoint xx="1" yy="2" zz="0.5" />
                        <controlpoint xx="2.5" yy="0" zz="0" />
                        <controlpoint xx="2.5" yy="1" zz="0" />
                        <controlpoint xx="2.5" yy="2" zz="0" />
                        <controlpoint xx="5" yy="1" zz="-0.5" />
                        <controlpoint xx="5" yy="1" zz="-0.5" />
                        <controlpoint xx="5" yy="1" zz="-0.5" />
                        <controlpoint xx="7.5" yy="2.5" zz="0" />
                        <controlpoint xx="7.5" yy="2.5" zz="0" />
                        <controlpoint xx="7.5" yy="2.5" zz="0" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="palmTrunk">
            <transforms>
                <translate value3="0.0 5.0 0.0" />
            </transforms>

            <materialref id="legMat" />
            
            <children>
                <primitive>
                    <cylinder base="0.5" top="0.5" height="25" slices="32" stacks="32" />
                </primitive>
            </children>
            
        </node>

        <node id="coins">
            <transforms>
                <translate value3="0.25 0.25 5.1" />
            </transforms>

            <materialref id="coinsMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="12 7" />
                </primitive>
            </children>

        </node>

        <node id="chestBase">

            <materialref id="chestMat" />
            <children>
                <primitive>
                    <box xyz1="0 0 0" xyz2="12.5 7.5 5"/>
                </primitive>
            </children>
        </node>

        <node id="chestTop">
            <transforms>
                <translate value3="6.25 4 6.95" />
                <rotate value3="1.04 0 1.57" />
            </transforms>

            <materialref id="chestMat" />

            <children>
                <primitive>
                    <cylinder base="4" top="4" height="12.5" slices="32" stacks="32" thetalength="3.14" />
                </primitive>
            </children>
        </node>

        <node id="beachPlane">

            <materialref id="sandMat" />
            
            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="200 50" />
                </primitive>
            </children>	
        </node>
        
        <node id="sea" receiveshadows="true">
			<transforms>
                <translate value3="-100.0 0.0 100.0" />
				<rotate value3="-1.57 0.0 0.0" />
            </transforms> 

			<materialref id="seaMat" />          
			
            <children>             
                <primitive>
                    <rectangle xy1="0 0" xy2="200 200" />
                </primitive>
            </children> 
        </node>

        <node id="bridge" castshadows = "true" receiveshadows = "true">
            <transforms>
                <translate value3="-100.0 0.0 -55.0" />
                <scale value3="2.5 2.5 2.5" />
            </transforms>

            <children>
                <noderef id="walk" />
                <noderef id="leg1" />
                <noderef id="leg2" />
                <noderef id="leg3" />
                <noderef id="leg4" />
            </children>
        </node>

        <node id="leg">
            <children>
                <primitive>
                    <cylinder base="0.3" top="0.3" height="1" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="leg1">
            <transforms>
                <translate value3="17.25 0.51 14.3" />
            </transforms>

            <materialref id="legMat" />

            <children>
                <noderef id="leg" />
            </children>
        </node>

        <node id="leg2">
            <transforms>
                <translate value3="12.75 0.51 14.3" />
            </transforms>

            <materialref id="legMat" />
        
            <children>
                <noderef id="leg" />
            </children>
        </node>

        <node id="leg3">
            <transforms>
                <translate value3="17.25 0.51 0.3" />
            </transforms>

            <materialref id="legMat" />
        
            <children>
                <noderef id="leg" />
            </children>
        </node>

        <node id="leg4">
            <transforms>
                <translate value3="12.75 0.51 0.3" />
            </transforms>

            <materialref id="legMat" />

            <children>
                <noderef id="leg" />
            </children>
        </node>

        <node id="plank">
            <children>
                <primitive>
                    <box xyz1="1 5 1.5" xyz2="0 0 1"/>
                </primitive>
            </children>
        </node>

        <node id="plank1">
            <transforms>
                <translate value3="0.0 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank2">
            <transforms>
                <translate value3="1.25 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank3">
            <transforms>
                <translate value3="2.5 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank4">
            <transforms>
                <translate value3="3.75 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank5">
            <transforms>
                <translate value3="5.0 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank6">
            <transforms>
                <translate value3="6.25 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank7">
            <transforms>
                <translate value3="7.5 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>
        
        <node id="plank8">
            <transforms>
                <translate value3="8.75 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank9">
            <transforms>
                <translate value3="10.0 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank10">
            <transforms>
                <translate value3="11.25 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank11">
            <transforms>
                <translate value3="12.5 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="plank12">
            <transforms>
                <translate value3="13.75 0.0 0.5" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

         <node id="support1">
            <transforms>

				<rotate value3="0.0 0.0 1.57" />
                <scale value3="0.5 2.95 1.0" />
                <translate value3="4.5 -14.75 0.0" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

         <node id="support2">
            <transforms>
                <rotate value3="0.0 0.0 1.57" />
                <scale value3="0.5 2.95 1.0" />
                <translate value3="0.0 -14.75 0.0" />
            </transforms>

            <children>
                <noderef id="plank" />
            </children>
        </node>

        <node id="torchBase">

            <materialref id="boatStructureMat" />
            
            <children>
                <primitive>
                    <cylinder base="0.1" top="0.3" height="4.0" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="wickTop">
            <transforms>
                <translate value3="0.0 -0.125 0.0" />
            </transforms>

            <children>
                <primitive>
                    <cylinder base="0.0" top="0.1" height="0.25" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="wickBase"> 
            <transforms>
                <rotate value3="-1.57 0 0.0" />
            </transforms>
            <children>
                <primitive>
                    <sphere radius="0.1" slices="32" stacks="32" thetastart="0.0" thetalength="3.1415" phistart="0.0" philength="3.1415" />
                </primitive>
            </children>
        </node>
            
        <node id="wick1">
            
            <transforms>
                <translate value3="0 -2.125 0" />
            </transforms>

            <materialref id="wickMat" />

            <children>
                <noderef id="wickTop" />
                <noderef id="wickBase" />
            </children>
        </node>

        <node id="wick2">
            
            <transforms>
                <translate value3="0 -2.125 0" />
            </transforms>

            <materialref id="wickMat" />

            <children>
                <noderef id="wickTop" />
                <noderef id="wickBase" />
            </children>
        </node>

        <node id="torch1">
            <transforms>
                <rotate value3="-1.57 0 0.0" />
                <translate value3="0.5 -3.51 0.5"/>
            </transforms>

            <materialref id="boatStructureMat" />

            <children>
                <noderef id="torchBase"/>
                <noderef id="wick1"/>
            </children>
        </node>

        <node id="torch2">
            <transforms>
                <rotate value3="-1.57 0 0.0" />
                <translate value3="0.5 -3.51 4.5"/>
            </transforms>

            <materialref id="boatStructureMat" />

            <children>
                <noderef id="torchBase"/>
                <noderef id="wick2"/>
            </children>
        </node>

        <node id="walk">
            <transforms>
				<translate value3="17.5 0.01 14.7" />
				<rotate value3="-1.57 0.0 1.57" />
            </transforms> 

            <materialref id="walkMat" /> 

            <children>             
                <noderef id="plank1" />
                <noderef id="plank2" />
                <noderef id="plank3" />
                <noderef id="plank4" />
                <noderef id="plank5" />
                <noderef id="plank6" />
                <noderef id="plank7" />
                <noderef id="plank8" />
                <noderef id="plank9" />
                <noderef id="plank10" />
                <noderef id="plank11" />
                <noderef id="plank12" />
                <noderef id="support1" />
                <noderef id="support2" />
                <noderef id="torch1" />
                <noderef id="torch2" />
            </children> 
        </node>

        <node id="boats">
            <children>
                <noderef id="boat1" />
                <noderef id="boat2" />
            </children>
        </node>
        
        <node id="boat1">
            <transforms>
                <translate value3="30.0 0.0 20.0" />
            </transforms>
            <children>
                <noderef id="boat" />
                <noderef id="cannon1" />
            </children>
        </node>

        <node id="boat2">
            <transforms>
                <translate value3="-30.0 0.0 20.0" />
            </transforms>
            <children>
                <noderef id="boat" />
                <noderef id="cannon2" />
            </children>
        </node>

        <node id="cannon1" castshadows="true" receiveshadows="true">
            <transforms>
                <translate value3="17.0 9.02 19.0" />
            </transforms>
            <children>
                <noderef id="cannonBase" />
                <noderef id="cannonBarrel" />
                <noderef id="cannonBall" />
            </children>
        </node>

        <node id="cannonBall">
            <transforms>
                <translate value3="-15.0 5.7 2.0" />
            </transforms>

            <materialref id="cannonBallMat" />

            <children>
                <primitive>
                    <sphere radius="1.0" slices="32" stacks="32" thetalength="6.28"/>
                </primitive>
            </children>
        </node>

        <node id="cannon2" castshadows="true" receiveshadows="true">
            <transforms>
                <translate value3="29.0 9.02 23.0" />
                <rotate value3="0.0 3.14 0.0" />
            </transforms>
            <children>
                <noderef id="cannonBase" />
                <noderef id="cannonBarrel" />
            </children>
        </node>

        <node id="cannonBase">
            <materialref id="darkWoodMat" />
            <children>
                <primitive>
                    <box xyz1="0 0 0" xyz2="4 3 4"/>
                </primitive>
            </children>
        </node>

        <node id="cannonBarrel">
            <transforms>
                <translate value3="-0.5 4.75 2.0" />
                <rotate value3="0.0 0.0 1.5" />
            </transforms>

            <materialref id="metalMat" />

            <children>
                <primitive>
                    <cylinder base="1.7" top="1.2" height="10.0" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="boat">
            <transforms>
                 <translate value3="23 0.01 2.0" />
            </transforms>
            <children>
                <noderef id="boatStructure" />
                <noderef id="boatNet" />
                <noderef id="sail1" />
                <noderef id="sail2" />
                <noderef id="sail3" />
                <noderef id="sail4" />
                <noderef id="sail5" />
                <noderef id="shield" />
            </children>
        </node>

        <node id="shield">
            <transforms>
                <translate value3="0 14 -10.53" />
                <rotate value3="0.0 0.0 1.57" />
            </transforms>

            <materialref id="shieldMat" />

            <children>
                <primitive>
                    <polygon 
                        radius="4" 
                        stacks="3" 
                        slices="5" 
                        color_c="0.0 0.0 0.0 1.0"
                        color_p="0.9 0.9 0.9 1.0"
                    />
                </primitive>
            </children>
        </node>

        <node id="boatNet">
            <transforms>
                <rotate value3="0.105 3.14 0.0" />
                <translate value3="-5.0 10.0 -5.0" />
            </transforms>

            <materialref id="netMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="10 30" parts_x="20" parts_y="10"/>
                </primitive>
            </children>
        </node>

        <node id="smallSail" castshadows = "true">
            <materialref id="sailMat" />

            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="1.5" yy="3" zz="0" />
                        <controlpoint xx="0" yy="6" zz="0" />
                        <controlpoint xx="0" yy="0" zz="3" />
                        <controlpoint xx="1.5" yy="3" zz="3" />
                        <controlpoint xx="0" yy="6" zz="3" />
                        <controlpoint xx="0" yy="0" zz="6" />
                        <controlpoint xx="1.5" yy="3" zz="6" />
                        <controlpoint xx="0" yy="6" zz="6" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="mediumSail" castshadows = "true">
            <materialref id="sailMat" />

            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="2" yy="4" zz="0" />
                        <controlpoint xx="0" yy="8" zz="0" />
                        <controlpoint xx="0" yy="0" zz="4" />
                        <controlpoint xx="2" yy="4" zz="4" />
                        <controlpoint xx="0" yy="8" zz="4" />
                        <controlpoint xx="0" yy="0" zz="8" />
                        <controlpoint xx="2" yy="4" zz="8" />
                        <controlpoint xx="0" yy="8" zz="8" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="bigSail"  castshadows = "true">
            <materialref id="sailMat" />

            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="3" yy="6" zz="0" />
                        <controlpoint xx="0" yy="12" zz="0" />
                        <controlpoint xx="0" yy="0" zz="6" />
                        <controlpoint xx="3" yy="6" zz="6" />
                        <controlpoint xx="0" yy="12" zz="6" />
                        <controlpoint xx="0" yy="0" zz="12" />
                        <controlpoint xx="3" yy="6" zz="12" />
                        <controlpoint xx="0" yy="12" zz="12" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="sail1"  castshadows = "true">
            <transforms>
                <translate value3="9 12.5 10.7" />
                <rotate value3="0.0 -1.57 00.0" />
                <scale value3="1.5 1.5 1.5" />
            </transforms>
            
            <children>
                <noderef id="bigSail" />
            </children>
        </node>

        <node id="sail2"  castshadows = "true">
             <transforms>
                 <translate value3="6.0 12.5 25.7" />
                 <rotate value3="0.0 -1.57 00.0" />
            </transforms>
            
            <children>
                <noderef id="bigSail" />
            </children>
        </node>

        <node id="sail3"  castshadows = "true">
             <transforms>
                 <translate value3="4.75 32.0 10.7" />
                 <rotate value3="0.0 -1.57 00.0" />
                 <scale value3="0.8 0.8 0.8" />
            </transforms>
            
            <children>
                <noderef id="bigSail" />
            </children>
        </node>

        <node id="sail4"  castshadows = "true">
             <transforms>
                 <translate value3="3.0 26.0 25.7" />
                 <rotate value3="0.0 -1.57 00.0" />
            </transforms>
            
            <children>
                <noderef id="smallSail" />
            </children>
        </node>

        <node id="sail5" castshadows = "true">
            <transforms>
                <translate value3="3.0 13.5 37.5" />
                <rotate value3="1.0 -1.57 0.0" />
            </transforms>
            
            <children>
                <noderef id="smallSail" />
            </children>
        </node>

        <node id="mast1"  castshadows = "true" receiveshadows = "true">
            <transforms>
                 <translate value3="0.0 26.51 10.0" />
            </transforms>

            <materialref id="boatStructureMat" />

            <children>
                <primitive>
                    <cylinder base="0.7" top="0.7" height="35.0" slices="32" stacks="32"/>
                </primitive>
            </children>
        </node>

        <node id="mast2"  castshadows = "true" receiveshadows = "true">
            <transforms>
                 <translate value3="0.0 21.51 25.0" />
            </transforms>

            <materialref id="boatStructureMat" />

            <children>
                <primitive>
                    <cylinder base="0.7" top="0.7" height="25.0" slices="32" stacks="32"/>
                </primitive>
            </children>
        </node>

        <node id="cabin" castshadows = "true" receiveshadows = "true">
            <transforms>
                <translate value3="-6.5 19.01 -8.5" />
                <rotate value3="1.57 0.0 0.0" />
            </transforms>

            <materialref id="boatStructureMat" />

            <children>
                <noderef id="cabinSide1" />
                <noderef id="cabinSide2" />
                <noderef id="cabinTop" />
                <noderef id="cabinBottom" />
                <noderef id="cabinFront" />
                <noderef id="cabinBack" />
            </children>
        </node>

        <node id="cabinSide1" castshadows="true" receiveshadows="true">
            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="1" yy="-2" zz="0" />
                        <controlpoint xx="-1" yy="4" zz="0" />
                        <controlpoint xx="-1.4" yy="12" zz="0" />
                        <controlpoint xx="1" yy="-2" zz="8" />
                        <controlpoint xx="-1" yy="4" zz="8" />
                        <controlpoint xx="-2" yy="12" zz="8" />
                        <controlpoint xx="1" yy="-2" zz="10" />
                        <controlpoint xx="-1" yy="4" zz="10" />
                        <controlpoint xx="-1.4" yy="12" zz="10" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="cabinSide2" castshadows="true" receiveshadows="true">
            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="12" yy="-2" zz="0" />
                        <controlpoint xx="14" yy="4" zz="0" />
                        <controlpoint xx="14.4" yy="12" zz="0" />
                        <controlpoint xx="12" yy="-2" zz="8" />
                        <controlpoint xx="14" yy="4" zz="8" />
                        <controlpoint xx="15" yy="12" zz="8" />
                        <controlpoint xx="12" yy="-2" zz="10" />
                        <controlpoint xx="14" yy="4" zz="10" />
                        <controlpoint xx="14.4" yy="12" zz="10" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="cabinBase" castshadows="true" receiveshadows="true">
            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="12" yy="-2" zz="0" />
                        <controlpoint xx="14" yy="4" zz="0" />
                        <controlpoint xx="14.4" yy="12" zz="0" />
                        <controlpoint xx="0" yy="-2" zz="0" />
                        <controlpoint xx="0" yy="-4" zz="0" />
                        <controlpoint xx="0" yy="12" zz="0" />
                        <controlpoint xx="1" yy="-2" zz="0" />
                        <controlpoint xx="-1" yy="4" zz="0" />
                        <controlpoint xx="-1.4" yy="12" zz="0" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="cabinTop" castshadows = "true" receiveshadows = "true">
            <children>
                <noderef id="cabinBase" />
            </children>
        </node>

        <node id="cabinBottom" castshadows = "true" receiveshadows = "true">
            <transforms>
                <translate value3="0.0 0.0 10.0" />
            </transforms>
            <children>
                <noderef id="cabinBase" />
            </children>
        </node>

        <node id="cabinFront" castshadows = "true" receiveshadows = "true">
            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="2" parts_u="100" parts_v="100">
                        <controlpoint xx="-1.4" yy="12" zz="0" />
                        <controlpoint xx="-2" yy="12" zz="8" />
                        <controlpoint xx="-1.4" yy="12" zz="10" />
                        <controlpoint xx="0" yy="12" zz="0" />
                        <controlpoint xx="0" yy="12" zz="8" />
                        <controlpoint xx="0" yy="12" zz="10" />
                        <controlpoint xx="14.4" yy="12" zz="0" />
                        <controlpoint xx="15" yy="12" zz="8" />
                        <controlpoint xx="14.4" yy="12" zz="10" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="cabinBack" castshadows = "true" receiveshadows = "true">
            <transforms>
                <translate value3="1.0 -2.01 0.0" />
                <rotate value3="1.57.0 0.0 0.0" />
            </transforms>

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="11 10" />
                </primitive>
            </children>
        </node>

        <node id="bowsprit"  castshadows = "true" receiveshadows = "true">
            <transforms>
                <translate value3="0.0 14.0 37.5" />
                <rotate value3="1.04 0.0 0.0" />
            </transforms>

            <materialref id="boatStructureMat" />

            <children>
                <primitive>
                    <cylinder base="0.8" top="0.0" height="25.0" slices="32" stacks="32"/>
                </primitive>
            </children>
        </node>

        <node id="boatSide1"  castshadows = "true" receiveshadows = "true">
            <children>
                <primitive>
                    <nurbs degree_u="5" degree_v="3" parts_u="100" parts_v="100">
                        <controlpoint xx="0" yy="0" zz="-3" />
                        <controlpoint xx="0" yy="0" zz="-3" />
                        <controlpoint xx="0" yy="6" zz="-6" />
                        <controlpoint xx="0" yy="12" zz="-6" />
                        <controlpoint xx="0" yy="0" zz="-3" />
                        <controlpoint xx="9" yy="0" zz="-3" />
                        <controlpoint xx="9" yy="6" zz="-3" />
                        <controlpoint xx="9" yy="12" zz="-3" />
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="6" yy="0" zz="0" />
                        <controlpoint xx="8.4" yy="0" zz="0" />
                        <controlpoint xx="9" yy="12" zz="0" />
                        <controlpoint xx="0" yy="0" zz="12" />
                        <controlpoint xx="6" yy="0" zz="12" />
                        <controlpoint xx="8.4" yy="0" zz="12" />
                        <controlpoint xx="9" yy="12" zz="12" />
                        <controlpoint xx="0" yy="0" zz="24" />
                        <controlpoint xx="6" yy="0" zz="24" />
                        <controlpoint xx="8.4" yy="0" zz="24" />
                        <controlpoint xx="9" yy="12" zz="24" />
                        <controlpoint xx="0" yy="0" zz="30" />
                        <controlpoint xx="0" yy="0" zz="33" />
                        <controlpoint xx="0" yy="0" zz="33" />
                        <controlpoint xx="0" yy="12" zz="36" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="boatSide2"  castshadows = "true" receiveshadows = "true">
            <children>
                <primitive>
                    <nurbs degree_u="5" degree_v="3" parts_u="100" parts_v="100">
                        <controlpoint xx="0" yy="0" zz="-3" />
                        <controlpoint xx="0" yy="0" zz="-3" />
                        <controlpoint xx="0" yy="6" zz="-6" />
                        <controlpoint xx="0" yy="12" zz="-6" />
                        <controlpoint xx="0" yy="0" zz="-3" />
                        <controlpoint xx="-9" yy="0" zz="-3" />
                        <controlpoint xx="-9" yy="6" zz="-3" />
                        <controlpoint xx="-9" yy="12" zz="-3" />
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="-6" yy="0" zz="0" />
                        <controlpoint xx="-8.4" yy="0" zz="0" />
                        <controlpoint xx="-9" yy="12" zz="0" />
                        <controlpoint xx="0" yy="0" zz="12" />
                        <controlpoint xx="-6" yy="0" zz="12" />
                        <controlpoint xx="-8.4" yy="0" zz="12" />
                        <controlpoint xx="-9" yy="12" zz="12" />
                        <controlpoint xx="0" yy="0" zz="24" />
                        <controlpoint xx="-6" yy="0" zz="24" />
                        <controlpoint xx="-8.4" yy="0" zz="24" />
                        <controlpoint xx="-9" yy="12" zz="24" />
                        <controlpoint xx="0" yy="0" zz="30" />
                        <controlpoint xx="0" yy="0" zz="33" />
                        <controlpoint xx="0" yy="0" zz="33" />
                        <controlpoint xx="0" yy="12" zz="36" />
                    </nurbs>
                </primitive>
            </children>
        </node>

       <node id="boatBase" receiveshadows = "true">
            <children>
                <primitive>
                    <nurbs degree_u="2" degree_v="5" parts_u="32" parts_v="32">
                        <controlpoint xx="0" yy="9" zz="-5.7" />
                        <controlpoint xx="8.4" yy="9" zz="-3" />
                        <controlpoint xx="8.4" yy="9" zz="0" />
                        <controlpoint xx="9" yy="9" zz="12" />
                        <controlpoint xx="8.4" yy="9" zz="24" />
                        <controlpoint xx="0" yy="9" zz="35.22" />
                        <controlpoint xx="0" yy="9" zz="-5.7" />
                        <controlpoint xx="8.4" yy="9" zz="-3" />
                        <controlpoint xx="8.4" yy="9" zz="0" />
                        <controlpoint xx="9" yy="9" zz="12" />
                        <controlpoint xx="8.4" yy="9" zz="24" />
                        <controlpoint xx="0" yy="9" zz="35.22" />
                        <controlpoint xx="0" yy="9" zz="-5.7" />
                        <controlpoint xx="-8.4" yy="9" zz="-3" />
                        <controlpoint xx="-8.4" yy="9" zz="0" />
                        <controlpoint xx="-9" yy="9" zz="12" />
                        <controlpoint xx="-8.4" yy="9" zz="24" />
                        <controlpoint xx="0" yy="9" zz="35.22" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="boatStructure">
            <materialref id="boatStructureMat" />

            <children>
                <noderef id="boatSide1" />
                <noderef id="boatSide2" />
                <noderef id="boatBase" />
                <noderef id="mast1" />
                <noderef id="mast2" />
                <noderef id="bowsprit" />
                <noderef id ="cabin" />
            </children>
        </node>

        <lod id="hutLod">
            <noderef id="hut1" mindist= "60"/>
            <noderef id="hut2" mindist="120"/>
            <noderef id="hut3" mindist="180"/>
        </lod>
    </graph>
</yaf>